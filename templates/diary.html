<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600&family=Homemade+Apple&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='book.css') }}">
    <title>Heirloom Diary</title>
</head>

<body>

<div class="book">

    <!-- LEFT PAGE (History Browser) -->
    <div class="page page-left">

        <div class="book-header">
            <h1>Heirloom Diary</h1>
        </div>

        <div class="entry">

            <div class="date-title">
                {{ formatted_date }}
            </div>

            {% for entry in entries %}
                <div class="entry-block">

                    <p class="{% if entry.scratched %}scratched{% endif %}">
                        {{ entry.content | replace('\n', '<br>') | safe }}
                    </p>

                    <small class="signature">
                        — {{ entry.user.username }}
                    </small>

                    {% if not entry.scratched %}
                        <a href="{{ url_for('scratch', entry_id=entry.id) }}"
                           class="scratch-btn">
                            Scratch
                        </a>
                    {% endif %}

                </div>
            {% endfor %}

        </div>

        <!-- Page Flip Navigation -->
        <div class="page-nav">

            {% if previous_date %}
                <a href="{{ url_for('diary', date=previous_date) }}" class="page-btn">
                    ← Previous Day
                </a>
            {% endif %}

            {% if next_date %}
                <a href="{{ url_for('diary', date=next_date) }}" class="page-btn">
                    Next Day →
                </a>
            {% endif %}

        </div>

    </div>

    <!-- RIGHT PAGE (Writing For Selected Date) -->
    <div class="page page-right">

        <div class="today-header">

            <div class="date-row">

                <form method="GET" action="{{ url_for('diary') }}" class="calendar-form">

                    <input type="date"
                        name="date"
                        class="calendar-input"
                        min="2026-01-01"
                        max="2026-12-31"
                        value="{{ selected_date }}"
                        onchange="this.form.submit()">

                </form>

            </div>

            <p class="welcome">{{ username }}</p>

        </div>

        <form method="POST" class="entry-form" novalidate>
            <textarea name="content" placeholder="Thoughts for the day..."></textarea>
            <button type="submit">Commit to the Archive</button>
        </form>

        <div class="right-footer">
            <a href="/logout" class="close-link">Close Book</a>
        </div>

    </div>

</div>

</body>
</html>
